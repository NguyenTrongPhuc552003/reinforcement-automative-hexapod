#!/bin/bash

# Check for required tools
if ! command -v make &> /dev/null; then
    echo "Error: 'make' is not installed"
    return 1
fi

if [ ! -d "/lib/modules/$(uname -r)/build" ]; then
    echo "Error: Kernel headers not found. Please install linux-headers-$(uname -r)"
    return 1
fi

# Export necessary environment variables
export KERNEL_DIR=/lib/modules/$(uname -r)/build
export PROJECT_ROOT=$(pwd)

echo "Kernel module development environment activated"
echo "Kernel version: $(uname -r)"
echo "Build directory: $KERNEL_DIR"
echo ""
echo "Available commands:"
echo "  make        - Build the kernel module"
echo "  make clean  - Clean build files"
echo "  make install - Install the module (requires root)"
